<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin Dashboard - Qu·∫£n l√Ω th∆∞ vi·ªán</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 240px;
            background: #1e4620;
            color: #fff;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .sidebar a {
            color: #fff;
            text-decoration: none;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .sidebar a:hover,
        .sidebar a.active {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .main {
            flex: 1;
            padding: 20px 30px;
            background: #f5f7fa;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            margin: 0;
            font-size: 20px;
        }
        
        .header button {
            background: #c62828;
            color: #fff;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: #fff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        
        th,
        td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #1e4620;
            color: #fff;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        
        .btn-edit {
            background: #1976d2;
            color: #fff;
        }
        
        .btn-delete {
            background: #d32f2f;
            color: #fff;
        }
        
        .btn-add {
            background: #2d5b2d;
            color: #fff;
            margin: 10px 0;
        }
        
        form label {
            display: block;
            margin-top: 8px;
        }
        
        form input {
            padding: 6px;
            margin-top: 4px;
            width: 100%;
        }
        
        .card {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            margin-top: 15px;
        }
    </style>
</head>

<body>
    <div class="sidebar">
        <h2>üìö Admin</h2>
        <a class="active" onclick="showPage('accounts')">Qu·∫£n l√Ω t√†i kho·∫£n</a>
        <a onclick="showPage('books')">Qu·∫£n l√Ω s√°ch</a>
        <a onclick="showPage('settings')">C√†i ƒë·∫∑t h·ªá th·ªëng</a>
    </div>

    <div class="main">
        <div class="header">
            <h1 id="pageTitle">Qu·∫£n l√Ω t√†i kho·∫£n</h1>
            <a href="dn.html"><button onclick="logout()">ƒêƒÉng xu·∫•t</button></a>
        </div>
        <div id="content"></div>
    </div>

    <script>
        // ======= DATA DEMO (localStorage gi·∫£ l·∫≠p database) =========
        if (!localStorage.getItem("accounts")) {
            localStorage.setItem("accounts", JSON.stringify([{
                id: 1,
                username: "admin",
                role: "Qu·∫£n tr·ªã vi√™n",
                status: "Ho·∫°t ƒë·ªông"
            }, {
                id: 2,
                username: "user",
                role: "Ng∆∞·ªùi d√πng",
                status: "Ho·∫°t ƒë·ªông"
            }]));
        }
        if (!localStorage.getItem("books")) {
            localStorage.setItem("books", JSON.stringify([{
                id: "B001",
                title: "L·∫≠p tr√¨nh C#",
                author: "Nguy·ªÖn VƒÉn A",
                quantity: 10
            }, {
                id: "B002",
                title: "C∆° s·ªü d·ªØ li·ªáu",
                author: "Tr·∫ßn VƒÉn B",
                quantity: 5
            }]));
        }

        // ======= HI·ªÇN TH·ªä MENU =========
        function showPage(page) {
            document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
            event.target.classList.add('active');
            const content = document.getElementById("content");
            const title = document.getElementById("pageTitle");

            if (page === "accounts") {
                title.textContent = "Qu·∫£n l√Ω t√†i kho·∫£n";
                renderAccounts();
            } else if (page === "books") {
                title.textContent = "Qu·∫£n l√Ω s√°ch";
                renderBooks();
            } else if (page === "settings") {
                title.textContent = "C√†i ƒë·∫∑t h·ªá th·ªëng";
                renderSettings();
            }
        }

        // ======= CH·ª®C NƒÇNG T√ÄI KHO·∫¢N =========
        function renderAccounts() {
            let data = JSON.parse(localStorage.getItem("accounts"));
            let html = `
      <button class="btn btn-add" onclick="addAccount()">+ Th√™m t√†i kho·∫£n</button>
      <table><tr><th>ID</th><th>T√™n ƒëƒÉng nh·∫≠p</th><th>Vai tr√≤</th><th>Tr·∫°ng th√°i</th><th>H√†nh ƒë·ªông</th></tr>
    `;
            data.forEach(acc => {
                html += `<tr>
        <td>${acc.id}</td>
        <td>${acc.username}</td>
        <td>${acc.role}</td>
        <td>${acc.status}</td>
        <td>
          <button class="btn btn-edit" onclick="editAccount(${acc.id})">S·ª≠a</button>
          <button class="btn btn-delete" onclick="deleteAccount(${acc.id})">Xo√°</button>
        </td>
      </tr>`;
            });
            html += "</table>";
            document.getElementById("content").innerHTML = html;
        }

        function addAccount() {
            const username = prompt("Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p:");
            const role = prompt("Nh·∫≠p vai tr√≤ (Admin/User):", "Ng∆∞·ªùi d√πng");
            let data = JSON.parse(localStorage.getItem("accounts"));
            let id = data.length ? data[data.length - 1].id + 1 : 1;
            data.push({
                id,
                username,
                role,
                status: "Ho·∫°t ƒë·ªông"
            });
            localStorage.setItem("accounts", JSON.stringify(data));
            renderAccounts();
        }

        function editAccount(id) {
            let data = JSON.parse(localStorage.getItem("accounts"));
            let acc = data.find(a => a.id === id);
            const role = prompt("Nh·∫≠p vai tr√≤:", acc.role);
            const status = prompt("Nh·∫≠p tr·∫°ng th√°i:", acc.status);
            acc.role = role;
            acc.status = status;
            localStorage.setItem("accounts", JSON.stringify(data));
            renderAccounts();
        }

        function deleteAccount(id) {
            if (confirm("Xo√° t√†i kho·∫£n n√†y?")) {
                let data = JSON.parse(localStorage.getItem("accounts"));
                data = data.filter(a => a.id !== id);
                localStorage.setItem("accounts", JSON.stringify(data));
                renderAccounts();
            }
        }

        // ======= CH·ª®C NƒÇNG S√ÅCH =========
        function renderBooks() {
            let data = JSON.parse(localStorage.getItem("books"));
            let html = `
      <button class="btn btn-add" onclick="addBook()">+ Th√™m s√°ch</button>
      <table><tr><th>M√£</th><th>T√™n s√°ch</th><th>T√°c gi·∫£</th><th>S·ªë l∆∞·ª£ng</th><th>H√†nh ƒë·ªông</th></tr>
    `;
            data.forEach(b => {
                html += `<tr>
        <td>${b.id}</td><td>${b.title}</td><td>${b.author}</td><td>${b.quantity}</td>
        <td>
          <button class="btn btn-edit" onclick="editBook('${b.id}')">S·ª≠a</button>
          <button class="btn btn-delete" onclick="deleteBook('${b.id}')">Xo√°</button>
        </td></tr>`;
            });
            html += "</table>";
            document.getElementById("content").innerHTML = html;
        }

        function addBook() {
            const id = prompt("Nh·∫≠p m√£ s√°ch:");
            const title = prompt("Nh·∫≠p t√™n s√°ch:");
            const author = prompt("Nh·∫≠p t√°c gi·∫£:");
            const quantity = parseInt(prompt("Nh·∫≠p s·ªë l∆∞·ª£ng:"), 10);
            let data = JSON.parse(localStorage.getItem("books"));
            data.push({
                id,
                title,
                author,
                quantity
            });
            localStorage.setItem("books", JSON.stringify(data));
            renderBooks();
        }

        function editBook(id) {
            let data = JSON.parse(localStorage.getItem("books"));
            let book = data.find(b => b.id === id);
            const title = prompt("T√™n s√°ch:", book.title);
            const author = prompt("T√°c gi·∫£:", book.author);
            const quantity = parseInt(prompt("S·ªë l∆∞·ª£ng:", book.quantity), 10);
            book.title = title;
            book.author = author;
            book.quantity = quantity;
            localStorage.setItem("books", JSON.stringify(data));
            renderBooks();
        }

        function deleteBook(id) {
            if (confirm("Xo√° s√°ch n√†y?")) {
                let data = JSON.parse(localStorage.getItem("books"));
                data = data.filter(b => b.id !== id);
                localStorage.setItem("books", JSON.stringify(data));
                renderBooks();
            }
        }

        // ======= C√ÄI ƒê·∫∂T =========
        function renderSettings() {
            document.getElementById("content").innerHTML = `
      <div class="card">
        <h2>C·∫•u h√¨nh h·ªá th·ªëng</h2>
        <form onsubmit="saveSettings(event)">
          <label>S·ªë ng√†y m∆∞·ª£n t·ªëi ƒëa:<input id="maxDays" type="number" value="14"></label>
          <label>S·ªë s√°ch ƒë∆∞·ª£c m∆∞·ª£n c√πng l√∫c:<input id="maxBooks" type="number" value="5"></label>
          <button type="submit" class="btn btn-edit" style="margin-top:10px;">L∆∞u</button>
        </form>
      </div>
    `;
        }

        function saveSettings(e) {
            e.preventDefault();
            const days = document.getElementById("maxDays").value;
            const books = document.getElementById("maxBooks").value;
            localStorage.setItem("settings", JSON.stringify({
                days,
                books
            }));
            alert("ƒê√£ l∆∞u c·∫•u h√¨nh!");
        }

        // ======= ƒêƒÇNG XU·∫§T =========
        function logout() {
            localStorage.removeItem("lib_user");
            localStorage.removeItem("lib_role");
            window.location.href = "index.html";
        }

        // M·∫∑c ƒë·ªãnh v√†o accounts
        renderAccounts();
    </script>
</body>

</html>